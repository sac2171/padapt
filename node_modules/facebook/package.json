{
  "name": "facebook",
  "description": "Simple Facebook Integration for NodeJS (and Express)",
  "version": "0.0.3",
  "author": {
    "name": "Dominiek ter Heide"
  },
  "main": "./lib/facebook",
  "dependencies": {
    "base64": ""
  },
  "readme": "h1. Facebook Connect for NodeJS\n\n_Note: I wrote an \"article on howtonode.org\":http://howtonode.org/facebook-connect on how to use Facebook Connect with Node_\n\nThis library contains NodeJS and jQuery scripts together with examples that allow you to easily integrate with Facebook. By making use of \"Facebook's Javascript Client Library\":http://wiki.developers.facebook.com/index.php/JavaScript_Client_Library we only have to do the minimal amount effort on the server-side, which \"could be a good thing\":http://synaptify.com/?p=613702.\n\nThere are two main ways of integrating with Facebook and both require you to \"sign up for a Facebook Application\":http://facebook.com/developer. If you want your web application to run inside Facebook, you need to make sure to verify users inside the Facebook Canvas (See example 2), otherwise, if you want users to use Facebook Connect to log onto your site, check Example 1.\n\nh2. Dependencies\n\nIn order to use these plugins, you need to install both \"NodeJS\":http://nodejs.org and the \"Express Web Framework\":http://github.com/visionmedia/express/ on top of it. \n\nExpress can easily be installed like this:\n\n<pre><code>cd myproject\ngit init\nmkdir -p lib/support\n\ngit submodule add git://github.com/visionmedia/express.git lib/support/express\ncd lib/support/express\ngit submodule init\ngit submodule update\n</code></pre>\n\nh2. Setting up your Project\n\n1. Create the necessary folders:\n\n<pre><code>cd myproject\nmkdir -p lib\nmkdir -p public/javascripts\n</code></pre>\n\n2. Copy \"lib/facebook.js\":node-facebook/blob/master/lib/facebook.js into /lib and \"lib/jquery.facebook.js\":node-facebook/blob/master/lib/jquery.facebook.js into public/javascripts\n\n3. Place a file called xd_receiver.htm into your public directory, this is for \"Facebook cross-domain communication\":http://wiki.developers.facebook.com/index.php/Cross_Domain_Communication_Channel:\n\n<pre><code><!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Strict//EN\"\n   \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd\"> \n<html xmlns=\"http://www.w3.org/1999/xhtml\" > \n<head> \n    <title>Cross-Domain Receiver Page</title> \n</head> \n<body> \n    <script src=\"http://static.ak.facebook.com/js/api_lib/v0.4/XdCommReceiver.js?v2\" type=\"text/javascript\"></script> \n</body> \n</html>\n</code></pre>\n\nh2. Example 1: FB Connect\n\nSee \"examples/fb_connect\":node-facebook/blob/master/examples/fb_connect for the these example files.\n\nh3. /app.js\n\n<pre><code>require.paths.unshift(__dirname + '/lib')\nrequire.paths.unshift(__dirname + '/lib/support/express/lib')\n\nvar express = require('express')\nvar app = express.createServer();\n\napp.configure(function(){\n  app.use(express.methodOverride())\n  app.use(ContentLength)\n  app.use(Cookie)\n  app.use(Session)\n  app.use(Logger)\n  app.use(require('facebook').Facebook(dx{\n    apiKey: 'e1249f7d4bc25b8f90e5c9c7523e3ee1', \n    apiSecret: '4ae45734dd66fa85c7b189fc2d7d5b4c'\n  })\n  app.set('root', __dirname)\n})\n\n// Called to get information about the current authenticated user\napp.get('/fbSession', function(req, res){\n  var fbSession = req.fbSession()\n\n  if(fbSession) {\n    // Here would be a nice place to lookup userId in the database\n    // and supply some additional information for the client to use\n  }\n\n  // The client will only assume authentication was OK if userId exists\n  res.send(JSON.stringify(fbSession || {}), {'Content-Type: 'application/json'});\n})\n\n// Called after a successful FB Connect\napp.post('/fbSession', function(req, res) {\n  var fbSession = req.fbSession() // Will return null if verification was unsuccesful\n\n  if(fbSession) {\n    // Now that we have a Facebook Session, we might want to store this new user in the db\n    // Also, in this.params there is additional information about the user (name, pic, first_name, etc)\n    // Note of warning: unlike fbSession, this additional information has not been verified\n    fbSession.first_name = req.params['first_name']\n  }\n\n  res.send(JSON.stringify(fbSession || {}), {'Content-Type: 'application/json'});\n})\n\n// Called on Facebook logout\napp.post('/fbLogout', function(req, res) {\n  req.fbLogout();\n  res.send(JSON.stringify({}))\n})\n\n// Static files in ./public\napp.get('/', function(req, res){ res.sendfile(__dirname + '/public/index.html') })\napp.get('/xd_receiver.htm', function(req, res){ res.sendfile(__dirname + '/public/xd_receiver.htm') })\napp.get('/javascripts/jquery.facebook.js', function(res, res){ res.sendfile(__dirname + '/public/javascripts/jquery.facebook.js') })\n\napp.listen()\n\n</code></pre>\n\nh3. /public/index.html\n\n<pre><code><!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\"> \n<html xmlns=\"http://www.w3.org/1999/xhtml\"> \n <head> \n    <script type=\"text/javascript\" src=\"http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js\"></script>\n    <script type=\"text/javascript\" src=\"/javascripts/jquery.facebook.js\"></script>\n    <script type=\"text/javascript\">\n      $(document).ready(function () {\n        $.fbInit('e1249f7d4bc25b8f90e5c9c7523e3ee1');\n        \n        // FB Connect action\n        $('#fb-connect').bind('click', function () {\n          $.fbConnect({'include': ['first_name', 'last_name', 'name', 'pic']}, function (fbSession) {\n            $('.not_authenticated').hide();\n            $('.authenticated').show();\n            $('#fb-first_name').html(fbSession.first_name);\n          });\n          return false;\n        });\n        \n        // FB Logout action\n        $('#fb-logout').bind('click', function () {\n          $.fbLogout(function () {\n            $('.authenticated').hide();\n            $('.not_authenticated').show();\n          });\n          return false;\n        });\n        \n        // Check whether we're logged in and arrange page accordingly\n        $.fbIsAuthenticated(function (fbSession) {\n          // Authenticated!\n          $('.authenticated').show();\n          $('#fb-first_name').html(fbSession.first_name);\n        }, function () {\n          // Not authenticated\n          $('.not_authenticated').show();\n        });\n        \n      });\n    </script>\n  </head>\n  \n  <body>\n    <div id=\"fb-root\"></div>\n    <script type=\"text/javascript\" src=\"http://static.ak.connect.facebook.com/js/api_lib/v0.4/FeatureLoader.js.php\"></script>\n    \n    <div id=\"my-account\">\n      <div class=\"authenticated\" style=\"display: none\">\n        Hi there <span id=\"fb-first_name\"></span>!\n        <a href=\"#\" id=\"fb-logout\">Logout</a>\n      </div>\n      <div class=\"not_authenticated\" style=\"display: none\">\n        <a href=\"#\" id=\"fb-connect\">Connect with Facebook</a>\n      </div>\n    </div>\n  </body> \n</html> \n</code></pre>\n\nh2. Example 2: A Facebook Application running in the Canvas\n\nSee \"examples/fb_iframe\":node-facebook/blob/master/examples/fb_iframe for the these example files.\n\nh3. /app.js\n\n<pre><code>require.paths.unshift(__dirname + '/lib')\nrequire.paths.unshift(__dirname + '/lib/support/express/lib')\n\nvar express = require('express')\nvar app = express,createServer();\n\napp.configure(function(){\n  app.use(express.methodOverride())\n  app.use(express.cookieDecoder())\n  app.use(express.session())\n  app.use(express.logger())\n  app.use(require('facebook').Facebook({\n    apiKey: 'e1249f7d4bc25b8f90e5c9c7523e3ee1', \n    apiSecret: '4ae45734dd66fa85c7b189fc2d7d5b4c'\n  })\n  express.staticProvider(__dirname + '/public')\n})\n\n// This is the canvas URL set in the Facebook Application settings\napp.get('/iframe', function(req, res) {\n  var fbSession = req.fbSession() // Will create a session based on verified data from the GET params\n  res.sendfile(__dirname + '/public/iframe.html')\n})\n\n// Called to get information about the current authenticated user\napp.get('/fbSession', function(req, res){\n  var fbSession = req.fbSession()\n\n  if(fbSession) {\n    // Here would be a nice place to lookup userId in the database\n    // and supply some additional information for the client to use\n  }\n\n  // The client will only assume authentication was OK if userId exists\n  res.send(JSON.stringify(fbSession || {}), {'Content-Type: 'application/json'});\n})\n\n// Static files in ./public\napp.get('/xd_receiver.htm', function(req, res){ res.sendfile(__dirname + '/public/xd_receiver.htm') })\napp.get('/javascripts/jquery.facebook.js', function(req, res){ res.sendfile(__dirname + '/public/javascripts/jquery.facebook.js') })\n\napp.listen()\n\n</code></pre>\n\nh3. /public/iframe.html\n\n<pre><code>\n<html> \n <head> \n    <title>Nodogoshi</title>\n    <script type=\"text/javascript\" src=\"http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js\"></script>\n    <script type=\"text/javascript\" src=\"/javascripts/jquery.facebook.js\"></script>\n\n    <script type=\"text/javascript\">\n      $(document).ready(function () {\n        $.fbInit('e1249f7d4bc25b8f90e5c9c7523e3ee1');\n        // Check whether we're logged in and arrange page accordingly\n        $.fbIsAuthenticated(function (fbSession) {\n          // Authenticated!\n          $.fbProfile(['first_name'], function (profile) {\n            $('#fb-first_name').html(profile.first_name);\n            $('.authenticated').show();\n          });\n        }, function () {\n          // Not authenticated\n          $('.not_authenticated').show();\n          $('#authenticate').click(function () {\n            $.fbIframeAuthenticate({'canvas_name': 'nodogoshi'});\n            return false;\n          });\n        });\n      });\n    </script>\n  </head>\n\n  <body>\n    <div id=\"fb-root\"></div>\n    <script type=\"text/javascript\" src=\"http://static.ak.facebook.com/js/api_lib/v0.4/FeatureLoader.js.php\"></script>\n\n    <div id=\"my-account\">\n      <div class=\"authenticated\" style=\"display: none\">\n        Hi there <span id=\"fb-first_name\"></span>!\n      </div>\n      <div class=\"not_authenticated\" style=\"display: none\">\n        Viewing anonymously, <a href=\"#\" id=\"authenticate\">click here</a> to authenticate.\n      </div>\n    </div>\n  </body> \n</html> \n</code></pre>\n\nh2. License\n\n\"MIT\":http://www.opensource.org/licenses/mit-license.php\n",
  "readmeFilename": "README.textile",
  "_id": "facebook@0.0.3",
  "dist": {
    "shasum": "82d91e3ce6ad964e02bde63d13fa523f7c1b521b"
  },
  "_from": "facebook"
}
